<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Manual &mdash; CMD3  documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootswatch-2.3.2/cosmo/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-2.3.2/css/bootstrap-responsive.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-2.3.2/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="CMD3  documentation" href="index.html" />
    <link rel="next" title="TODO" href="todo.html" />
    <link rel="prev" title="Contact" href="contact.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>

        <a class="brand" href="index.html">
          CMD3</a>
        <span class="navbar-text pull-left"><b>1.9.0</b></span>

        <div class="nav-collapse">
          <ul class="nav">
            <li class="divider-vertical"></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="contact.html">Contact</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contact.html#authors">Authors</a></li>
<li class="toctree-l2"><a class="reference internal" href="contact.html#contributors">Contributors</a></li>
<li class="toctree-l2"><a class="reference internal" href="contact.html#repository">Repository</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Manual</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#documentation">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#install-from-pypi">Install from Pypi</a></li>
<li class="toctree-l3"><a class="reference internal" href="#install-from-source">Install from Source</a></li>
<li class="toctree-l3"><a class="reference internal" href="#install-the-cmd3-configuration-file">Install the cmd3 Configuration file</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-the-installed-version">Running the installed version</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-from-the-source-directory">Running from the Source Directory</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#using-the-shell">Using the Shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="#extending-the-shell">Extending the Shell</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#reading-plugins-from-your-local-instalation">Reading plugins from your local instalation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reading-plugins-from-the-deploy-directory">Reading plugins from the deploy directory</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#writing-plugins">Writing Plugins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#a-basic-plugin">A Basic Plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="#argument-parsing">Argument parsing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#generating-information">Generating Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="#function-registration">Function Registration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#generating-independent-packages">Generating independent packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="#build-in-commands">Build In Commands</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#help">Help</a></li>
<li class="toctree-l3"><a class="reference internal" href="#manual-pages">Manual Pages</a></li>
<li class="toctree-l3"><a class="reference internal" href="#variables">Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="#scope">Scope</a></li>
<li class="toctree-l3"><a class="reference internal" href="#scripts">Scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="#python">Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="#quitting-the-shell">Quitting the shell</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="todo.html">TODO</a><ul>
<li class="toctree-l2"><a class="reference internal" href="todo.html#list">List</a></li>
<li class="toctree-l2"><a class="reference internal" href="todo.html#github">Github</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="modules/modules.html">Modules and Classes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="modules/cmd3.html">cmd3 Package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="modules/cmd3.html#id1"><code class="docutils literal"><span class="pre">cmd3</span></code> Package</a></li>
<li class="toctree-l3"><a class="reference internal" href="modules/cmd3.html#module-cmd3.shell"><code class="docutils literal"><span class="pre">shell</span></code> Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="modules/cmd3.html#subpackages">Subpackages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="modules/cmd3.plugins.html">plugins Package</a><ul>
<li class="toctree-l5"><a class="reference internal" href="modules/cmd3.plugins.html#module-cmd3.plugins.activate"><code class="docutils literal"><span class="pre">activate</span></code> Module</a></li>
<li class="toctree-l5"><a class="reference internal" href="modules/cmd3.plugins.html#module-cmd3.plugins.clear"><code class="docutils literal"><span class="pre">clear</span></code> Module</a></li>
<li class="toctree-l5"><a class="reference internal" href="modules/cmd3.plugins.html#module-cmd3.plugins.edit"><code class="docutils literal"><span class="pre">edit</span></code> Module</a></li>
<li class="toctree-l5"><a class="reference internal" href="modules/cmd3.plugins.html#module-cmd3.plugins.graphviz"><code class="docutils literal"><span class="pre">graphviz</span></code> Module</a></li>
<li class="toctree-l5"><a class="reference internal" href="modules/cmd3.plugins.html#module-cmd3.plugins.info"><code class="docutils literal"><span class="pre">info</span></code> Module</a></li>
<li class="toctree-l5"><a class="reference internal" href="modules/cmd3.plugins.html#module-cmd3.plugins.pause"><code class="docutils literal"><span class="pre">pause</span></code> Module</a></li>
<li class="toctree-l5"><a class="reference internal" href="modules/cmd3.plugins.html#module-cmd3.plugins.rst"><code class="docutils literal"><span class="pre">rst</span></code> Module</a></li>
<li class="toctree-l5"><a class="reference internal" href="modules/cmd3.plugins.html#module-cmd3.plugins.shell_core"><code class="docutils literal"><span class="pre">shell_core</span></code> Module</a></li>
<li class="toctree-l5"><a class="reference internal" href="modules/cmd3.plugins.html#module-cmd3.plugins.template"><code class="docutils literal"><span class="pre">template</span></code> Module</a></li>
<li class="toctree-l5"><a class="reference internal" href="modules/cmd3.plugins.html#module-cmd3.plugins.timer"><code class="docutils literal"><span class="pre">timer</span></code> Module</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Manual</a><ul>
<li><a class="reference internal" href="#documentation">Documentation</a></li>
<li><a class="reference internal" href="#installation">Installation</a><ul>
<li><a class="reference internal" href="#install-from-pypi">Install from Pypi</a></li>
<li><a class="reference internal" href="#install-from-source">Install from Source</a></li>
<li><a class="reference internal" href="#install-the-cmd3-configuration-file">Install the cmd3 Configuration file</a></li>
<li><a class="reference internal" href="#running-the-installed-version">Running the installed version</a></li>
<li><a class="reference internal" href="#running-from-the-source-directory">Running from the Source Directory</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-the-shell">Using the Shell</a></li>
<li><a class="reference internal" href="#extending-the-shell">Extending the Shell</a><ul>
<li><a class="reference internal" href="#reading-plugins-from-your-local-instalation">Reading plugins from your local instalation</a></li>
<li><a class="reference internal" href="#reading-plugins-from-the-deploy-directory">Reading plugins from the deploy directory</a></li>
</ul>
</li>
<li><a class="reference internal" href="#writing-plugins">Writing Plugins</a><ul>
<li><a class="reference internal" href="#a-basic-plugin">A Basic Plugin</a></li>
<li><a class="reference internal" href="#argument-parsing">Argument parsing</a></li>
<li><a class="reference internal" href="#generating-information">Generating Information</a></li>
<li><a class="reference internal" href="#function-registration">Function Registration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#generating-independent-packages">Generating independent packages</a></li>
<li><a class="reference internal" href="#build-in-commands">Build In Commands</a><ul>
<li><a class="reference internal" href="#help">Help</a></li>
<li><a class="reference internal" href="#manual-pages">Manual Pages</a></li>
<li><a class="reference internal" href="#variables">Variables</a></li>
<li><a class="reference internal" href="#scope">Scope</a></li>
<li><a class="reference internal" href="#scripts">Scripts</a></li>
<li><a class="reference internal" href="#python">Python</a></li>
<li><a class="reference internal" href="#quitting-the-shell">Quitting the shell</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="contact.html" title="Previous Chapter: Contact"><span class="icon-chevron-left visible-tablet"></span><span class="hidden-sm hidden-tablet">&laquo; Contact</span>
    </a>
  </li>
  <li>
    <a href="todo.html" title="Next Chapter: TODO"><span class="icon-chevron-right visible-tablet"></span><span class="hidden-sm hidden-tablet">TODO &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
      </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="span12">
      
  <a href="https://github.com/cloudmesh/cmd3"
    class="visible-desktop"><img
   style="position: absolute; top: 40px; right: 0; border: 0;"
   src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"
   alt="Fork me on GitHub"></a><div class="section" id="manual">
<h1><a class="toc-backref" href="#id1">Manual</a><a class="headerlink" href="#manual" title="Permalink to this headline">¶</a></h1>
<p>Gregor von Laszewski, <a class="reference external" href="mailto:laszewski&#37;&#52;&#48;gmail&#46;com">laszewski<span>&#64;</span>gmail<span>&#46;</span>com</a></p>
<div class="sidebar">
<p class="first sidebar-title">.</p>
<div class="contents last topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#manual" id="id1">Manual</a><ul>
<li><a class="reference internal" href="#documentation" id="id2">Documentation</a></li>
<li><a class="reference internal" href="#installation" id="id3">Installation</a><ul>
<li><a class="reference internal" href="#install-from-pypi" id="id4">Install from Pypi</a></li>
<li><a class="reference internal" href="#install-from-source" id="id5">Install from Source</a></li>
<li><a class="reference internal" href="#install-the-cmd3-configuration-file" id="id6">Install the cmd3 Configuration file</a></li>
<li><a class="reference internal" href="#running-the-installed-version" id="id7">Running the installed version</a></li>
<li><a class="reference internal" href="#running-from-the-source-directory" id="id8">Running from the Source Directory</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-the-shell" id="id9">Using the Shell</a></li>
<li><a class="reference internal" href="#extending-the-shell" id="id10">Extending the Shell</a><ul>
<li><a class="reference internal" href="#reading-plugins-from-your-local-instalation" id="id11">Reading plugins from your local instalation</a></li>
<li><a class="reference internal" href="#reading-plugins-from-the-deploy-directory" id="id12">Reading plugins from the deploy directory</a></li>
</ul>
</li>
<li><a class="reference internal" href="#writing-plugins" id="id13">Writing Plugins</a><ul>
<li><a class="reference internal" href="#a-basic-plugin" id="id14">A Basic Plugin</a></li>
<li><a class="reference internal" href="#argument-parsing" id="id15">Argument parsing</a></li>
<li><a class="reference internal" href="#generating-information" id="id16">Generating Information</a></li>
<li><a class="reference internal" href="#function-registration" id="id17">Function Registration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#generating-independent-packages" id="id18">Generating independent packages</a></li>
<li><a class="reference internal" href="#build-in-commands" id="id19">Build In Commands</a><ul>
<li><a class="reference internal" href="#help" id="id20">Help</a></li>
<li><a class="reference internal" href="#manual-pages" id="id21">Manual Pages</a></li>
<li><a class="reference internal" href="#variables" id="id22">Variables</a></li>
<li><a class="reference internal" href="#scope" id="id23">Scope</a></li>
<li><a class="reference internal" href="#scripts" id="id24">Scripts</a></li>
<li><a class="reference internal" href="#python" id="id25">Python</a></li>
<li><a class="reference internal" href="#quitting-the-shell" id="id26">Quitting the shell</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="documentation">
<h2><a class="toc-backref" href="#id2">Documentation</a><a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h2>
<p>The documentation of cmd3 is maintained at</p>
<ul class="simple">
<li><a class="reference external" href="http://cloudmesh.github.com/cmd3/">http://cloudmesh.github.com/cmd3/</a></li>
</ul>
</div>
<div class="section" id="installation">
<h2><a class="toc-backref" href="#id3">Installation</a><a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="install-from-pypi">
<h3><a class="toc-backref" href="#id4">Install from Pypi</a><a class="headerlink" href="#install-from-pypi" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre>pip install cmd3
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>due to some current issues in pip, you will need to do the
following steps instead of just athe above:</p>
<div class="highlight-python"><div class="highlight"><pre>pip --trusted-host pypi.python.org install cloudmesh_base
pip --trusted-host pypi.python.org install cmd3
</pre></div>
</div>
<p>Make sure cm is installed and works with:</p>
<div class="highlight-python"><div class="highlight"><pre>cm help
</pre></div>
</div>
<p>If you have not yet set up a cmd3.yaml file in ~/.cloudmesh
you can do this with:</p>
<div class="last highlight-python"><div class="highlight"><pre>cm setup-yaml
</pre></div>
</div>
</div>
</div>
<div class="section" id="install-from-source">
<h3><a class="toc-backref" href="#id5">Install from Source</a><a class="headerlink" href="#install-from-source" title="Permalink to this headline">¶</a></h3>
<p>We recommend that you use virtual env for installing this package, but
you can naturally also install it in other ways. To use virtual env
you may consult with its manual. We assume we create a virtual env
called CMD3:</p>
<div class="highlight-python"><div class="highlight"><pre>virtualenv ~/CMD3
~/CMD3/bin/activate
</pre></div>
</div>
<p>Next you need to get the source code from git as follows and conduct
the installation</p>
<div class="highlight-python"><div class="highlight"><pre>git clone https://github.com/cloudmesh/cmd3.git
cd cmd3
python setup.py install
</pre></div>
</div>
<p>Developers having access to the repository can use:</p>
<div class="highlight-python"><div class="highlight"><pre>git clone git@github.com:cloudmesh/cmd3.git
</pre></div>
</div>
</div>
<div class="section" id="install-the-cmd3-configuration-file">
<h3><a class="toc-backref" href="#id6">Install the cmd3 Configuration file</a><a class="headerlink" href="#install-the-cmd3-configuration-file" title="Permalink to this headline">¶</a></h3>
<p>Cloudmesh is configured with a configuration file in the yaml
format. Please place this file in:</p>
<div class="highlight-python"><div class="highlight"><pre>~/.cloudmesh/cmd3.yaml
</pre></div>
</div>
<p>This file specifies which modules are imported in addition to the
default locations for the plugins.</p>
<p>An example file is located at:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/cloudmesh/cmd3/blob/master/cmd3/etc/cmd3.yaml">https://github.com/cloudmesh/cmd3/blob/master/cmd3/etc/cmd3.yaml</a></li>
</ul>
<p>and looks as follows:</p>
<div class="highlight-python"><div class="highlight"><pre>meta:
    yaml_version: 2.1
    kind: cmd3
    filename: ${HOME}/.cloudmesh/cmd3.yaml
    location: ${HOME}/.cloudmesh/cmd3.yaml
    prefix: null
cmd3:
    modules:
    - cloudmesh_cmd3.plugins
    - cloudmesh_docker.plugins
    - cloudmesh_slurm.plugins
    - cloudmesh_deploy.plugins
</pre></div>
</div>
<p>In the modules attribute you can add new plugin modules following the
cmd3 specification. This has the advantage that you do not have to
worry about the path as it is taken from a local deployed version.</p>
</div>
<div class="section" id="running-the-installed-version">
<h3><a class="toc-backref" href="#id7">Running the installed version</a><a class="headerlink" href="#running-the-installed-version" title="Permalink to this headline">¶</a></h3>
<p>Now you are ready to run the shell with the command:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">cm</span>
</pre></div>
</div>
<p>Which will give you something like this:</p>
<div class="highlight-python"><div class="highlight"><pre>======================================================
   ____ _                 _                     _
  / ___| | ___  _   _  __| |_ __ ___   ___  ___| |__
 | |   | |/ _ \| | | |/ _` | &#39;_ ` _ \ / _ \/ __| &#39;_ \
 | |___| | (_) | |_| | (_| | | | | | |  __/\__ \ | | |
  \____|_|\___/ \__,_|\__,_|_| |_| |_|\___||___/_| |_|
======================================================
                     Cloudmesh Shell

cm&gt;
</pre></div>
</div>
<p>It first prints the plugins that it found, loads them and than starts
the shell. As we use the shell to develop a much larger shell for
clouds (which we call cloudmesh) you will see a welcome
message. Cloudmesh is available on github at
<a class="reference external" href="https://github.com/cloudmesh/cmd3">https://github.com/cloudmesh/cmd3</a>. Please note that cloudmesh is under
development and you can actively help us while joining the cloudmesh
project.</p>
</div>
<div class="section" id="running-from-the-source-directory">
<h3><a class="toc-backref" href="#id8">Running from the Source Directory</a><a class="headerlink" href="#running-from-the-source-directory" title="Permalink to this headline">¶</a></h3>
<p>This will install you code in to the site-packages directory. If you
do not want to install the package, you can also go into src/cmd3
where you can find the shell.py program. Now you can alternatively
start it with:</p>
<div class="highlight-python"><div class="highlight"><pre>python shell.py
</pre></div>
</div>
</div>
</div>
<div class="section" id="using-the-shell">
<h2><a class="toc-backref" href="#id9">Using the Shell</a><a class="headerlink" href="#using-the-shell" title="Permalink to this headline">¶</a></h2>
<p>The shell is easy to use and you can get started by exploring the
available commands simply by saying:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">help</span>
</pre></div>
</div>
<p>It will list you a number of commands that are available to you. some
of them will be located in your plugin directories where you can place
additional plugins. Upon start of cmd3 the plugins will be reread and
all of them, including new once, will be available to you.</p>
</div>
<div class="section" id="extending-the-shell">
<h2><a class="toc-backref" href="#id10">Extending the Shell</a><a class="headerlink" href="#extending-the-shell" title="Permalink to this headline">¶</a></h2>
<p>CMD3 allows you to extend the commands provided in via plugin directories.
We assume the following directory structure:</p>
<div class="highlight-python"><div class="highlight"><pre>./shell.py
./plugins/foo.py
./plugins/bar.py
./plugins/activate.py

 ... other dirs and file ...
</pre></div>
</div>
<p>We provide a simple example of how to write and add new classes via
the plugin directory in this manual.</p>
<p>Let us assume that <cite>foo</cite> and <cite>bar</cite> contain some classes that include
the usual <a href="#id27"><span class="problematic" id="id28">do_</span></a> methods yo may know from cmd. However in addition to the
<a href="#id29"><span class="problematic" id="id30">do_</span></a> method it also includes an activate method that is called with the
activation module, so you can control its behavior upon startup. This
is similar to an __init__ method, but we decided not to name them
__init__ in order to highlight that they are called only at the
activation of the plugin.</p>
<p>To specify the plugins please use in the shell.py code:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">plugins</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;foo&quot;</span><span class="p">,</span> <span class="s">&quot;bar&quot;</span><span class="p">,</span><span class="s">&quot;activate&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>Now you can set a name for your class:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;CmCLI&quot;</span>
</pre></div>
</div>
<p>The rest is pretty simple:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="n">plugin_objects</span><span class="p">)</span> <span class="o">=</span> <span class="n">DynamicCmd</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">plugins</span><span class="p">)</span>
<span class="n">cmd</span><span class="o">.</span><span class="n">activate</span><span class="p">(</span><span class="n">plugin_objects</span><span class="p">)</span>
<span class="n">cmd</span><span class="o">.</span><span class="n">cmdloop</span><span class="p">()</span>
</pre></div>
</div>
<p>Many times you may want to provide some better location for your
plugins such as system wide installed plugins, or plugins maintained
in your user environment rather than the current path. For this reason
we provide the following examples.</p>
<div class="section" id="reading-plugins-from-your-local-instalation">
<h3><a class="toc-backref" href="#id11">Reading plugins from your local instalation</a><a class="headerlink" href="#reading-plugins-from-your-local-instalation" title="Permalink to this headline">¶</a></h3>
<p>We assume you have placed a plugin directory at
&#8220;~/.cloudmesh/cmd3local/&#8221;. Than you simply can read the plugins by</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">plugin_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s">&quot;~/.cloudmesh/cmd3local/&quot;</span><span class="p">)</span>

<span class="n">plugins</span> <span class="o">=</span> <span class="n">get_plugins</span><span class="p">(</span><span class="n">plugin_path</span><span class="p">)</span>
</pre></div>
</div>
<p>Naturally you can have other plugin directories. In fact we will be
expanding our plugin module called plugin so users could add their own
plugin directories on demand.</p>
</div>
<div class="section" id="reading-plugins-from-the-deploy-directory">
<h3><a class="toc-backref" href="#id12">Reading plugins from the deploy directory</a><a class="headerlink" href="#reading-plugins-from-the-deploy-directory" title="Permalink to this headline">¶</a></h3>
<p>Assume you like to load the plugins from the deployed cmd3, this can
be done easily while looking at the code for shell.py:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">plugin_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">__file__</span><span class="p">),</span><span class="s">&#39;plugins&#39;</span><span class="p">)</span>

<span class="n">plugins</span> <span class="o">=</span> <span class="n">get_plugins</span><span class="p">(</span><span class="n">plugin_path</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="writing-plugins">
<h2><a class="toc-backref" href="#id13">Writing Plugins</a><a class="headerlink" href="#writing-plugins" title="Permalink to this headline">¶</a></h2>
<p>Plugins are very simple to design and write. However we have to be
aware of several facts. First, if you design a method with the same
name within two different plugins, the method from the last loaded
plugin will overwrite the previous method. This is the intended
behavior as to allow for easy extensions to be put in place and
overwrite default behavior. However, you need to be careful as not to
confuse yourself by properly ordering the plugins upon load loaded.
In addition we have on purpose not used an __init__ method in the
class but instead used an activate method to indicate that we like in
future to activate and deactivate certain plugins.</p>
<div class="section" id="a-basic-plugin">
<h3><a class="toc-backref" href="#id14">A Basic Plugin</a><a class="headerlink" href="#a-basic-plugin" title="Permalink to this headline">¶</a></h3>
<p>Here is the sample class from the file plugins/foo.py:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">foo</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">activate_foo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">&quot;... activate foo&quot;</span>

    <span class="k">def</span> <span class="nf">do_foo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">&quot;I am Foo&quot;</span><span class="p">,</span> <span class="n">arg</span>
</pre></div>
</div>
<p>Now place this module in your plugins directory and you are all
set. when you start the shell and say:</p>
<div class="highlight-python"><div class="highlight"><pre>foo bar
</pre></div>
</div>
<p>It will print:</p>
<div class="highlight-python"><div class="highlight"><pre>I am Foo bar
</pre></div>
</div>
<p>This does not seem much different from the original cmd, an in fact it
is not. The only difference so far is the introduction of the plugins
directory. Thus instead of changing my shell.py program, adding
inheritance or other mechanisms and making sure I invoke the right
__init__ methods, all this is not needed here.</p>
<p>This has advantages and disadvantages and you may judge for yourself,
if you like to use a plugin or an inheritance mode.</p>
</div>
<div class="section" id="argument-parsing">
<h3><a class="toc-backref" href="#id15">Argument parsing</a><a class="headerlink" href="#argument-parsing" title="Permalink to this headline">¶</a></h3>
<p>One of the important differentiation to the original cmd is how we are
handeling documentation. Although it is possible to use just the same
mechanism as in cmd, Cmd3 also allows the use of docopts. This has the
advantage that we can very quickly design prototypes of commands with
nice option parsing based on the documentation that is provided with
the method as documented at <a class="reference external" href="http://docopt.org">http://docopt.org</a>.</p>
<p>So let us create a new plugin called bar:</p>
<div class="highlight-python"><div class="highlight"><pre>from cmd3.cyberaide.decorators import command

class bar:

    def activate_bar(self):
        print &quot;... activate bar&quot;

    @command
    def do_bar(self, arg, arguments):
        &quot;&quot;&quot;Usage:
                bar -f FILE
                bar FILE
                bar list

         This command does some useful things.

         Arguments:
               FILE   a file name

         Options:
               -f      specify the file

         Example:
             bar filename

                  executes the bar command with the given filename

         print arguments
</pre></div>
</div>
<p>Please note the differences to our previous class. We have introduced a
decorator that transforms the do_bar method into a method that returns
an additional parameter called arguments. This is the arguments dict
that is created by <cite>docopt</cite> and allows for some very convenient
introduction of handling the parameters, arguments, and options.  If
you like to find more out about docopts please visit the <a class="reference external" href="https://github.com/docopt">website</a> ,
which also includes some nice <a class="reference external" href="https://github.com/docopt/docopt/tree/master/examples">examples</a> to show the use of docopt in
python.</p>
</div>
<div class="section" id="generating-information">
<h3><a class="toc-backref" href="#id16">Generating Information</a><a class="headerlink" href="#generating-information" title="Permalink to this headline">¶</a></h3>
<p>Often it is good to provide some summary information about a module
that you have installed. As each package may have such information we
have implemented the <cite>info</cite> command that prints out all information from
all modules if available</p>
<p>So let us enhance the previous plugin while adding an information:</p>
<div class="highlight-python"><div class="highlight"><pre>from cmd3.cyberaide.decorators import command

class bar:

    def activate_bar(self):
        print &quot;... activate bar&quot;

    def info_bar(self):
        print &quot;information for the class bar&quot;

    @command
    def do_bar(self, arg, arguments):
        &quot;&quot;&quot;Usage:
                bar -f FILE
                bar FILE
                bar list

         This command does some useful things.

         Arguments:
               FILE   a file name

         Options:
               -f      specify the file

         Example:

                 bar filename

                     executes the bar command with the given filename

         &quot;&quot;&quot;
         print arguments
</pre></div>
</div>
<p>When you call the command:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">cm</span><span class="o">&gt;</span> <span class="n">info</span>
</pre></div>
</div>
<p>from the cm command it will execute the info method fo the class bar.</p>
</div>
<div class="section" id="function-registration">
<h3><a class="toc-backref" href="#id17">Function Registration</a><a class="headerlink" href="#function-registration" title="Permalink to this headline">¶</a></h3>
<p>Sometimes you have already developed a function with docopts and
instead of redeveloping it you may just want to add it. Although we
could just register the function it is beneficial for us to use our
plugin and class concept to organize such a command.  Hence we have
developed a very convenient function_command decorator, that accepts
an external function so you can integrate it trivially into the
shell. After these many words, we demonstrate this through
the following program.  In this example the command fbar will inherit
the documentation form the function main_func and will also execute
it.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">cmd3.shell</span> <span class="kn">import</span> <span class="n">function_command</span>


<span class="k">def</span> <span class="nf">main_func</span><span class="p">(</span><span class="n">arguments</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Usage:</span>
<span class="sd">         hallo NAME</span>
<span class="sd">    </span>
<span class="sd">    Arguments:</span>
<span class="sd">         NAME    just an example [default: gregor]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">print</span> <span class="n">arguments</span>
    <span class="k">print</span> <span class="s">&quot;Name&quot;</span><span class="p">,</span> <span class="n">arguments</span><span class="p">[</span><span class="s">&quot;NAME&quot;</span><span class="p">]</span>


<span class="c"># noinspection PyUnusedLocal</span>
<span class="k">class</span> <span class="nc">fbar</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">activate_fbar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">&quot;... activate fbar&quot;</span>

    <span class="k">def</span> <span class="nf">info_fbar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span> <span class="s">&quot;information for the class bar&quot;</span>

    <span class="nd">@function_command</span><span class="p">(</span><span class="n">main_func</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">do_fbar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">,</span> <span class="n">arguments</span><span class="p">):</span>
        <span class="n">main_func</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span>
        <span class="k">pass</span>
</pre></div>
</div>
<p>This has also the advantage that you could make the main_func
available through a python main section so you could also run it directly
on the commandline. This will simplify debugging of the main_func as
certain debug checks are switched of when it is run through the command
shell. Just make sure that you parse the arguments in docpots before
you call the main_func:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">arguments</span> <span class="o">=</span> <span class="n">docopt</span><span class="p">(</span><span class="n">main_func</span><span class="o">.</span><span class="n">__doc__</span><span class="p">)</span>
    <span class="n">main_func</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="generating-independent-packages">
<h2><a class="toc-backref" href="#id18">Generating independent packages</a><a class="headerlink" href="#generating-independent-packages" title="Permalink to this headline">¶</a></h2>
<p>Often you may want to generate your own extensions, but like to
maintain them in a separate module. We have provided a command with
cmd3 that creates from a template a new module including a directory
structure and setup.py files. Thus once you create such a module, ypu
can cd into it and install it just as any other python package.</p>
<p>Let us walk through how to do this in more detail. The command to
create such a module is called <cite>cm-generate-command</cite>. It uses a
template that is installed in the directory:</p>
<div class="highlight-python"><div class="highlight"><pre>~/.cloudmesh/cmd3_template
</pre></div>
</div>
<p>You can obtain the manual page by just typing:</p>
<div class="highlight-python"><div class="highlight"><pre>$ cm-generate-command
</pre></div>
</div>
<p>Let us assume you like to create a command called <cite>uebercool</cite> to be
included in cmd3. This can be achieved with a very small number of steps.</p>
<p>First, call the command:</p>
<div class="highlight-python"><div class="highlight"><pre>cm-generate-command uebercool --path=~
</pre></div>
</div>
<p>This will generate a a cloudmesh command module in your home
directory. be careful that there is no such module already as the
current version deletes the existing directory.</p>
<p>You will now have created a python module at:</p>
<div class="highlight-python"><div class="highlight"><pre>~/cloudmesh_uebercool
</pre></div>
</div>
<p>You can install it simply with:</p>
<div class="highlight-python"><div class="highlight"><pre>cd ~/cloudmesh_uebercool
python setup.py install
</pre></div>
</div>
<p>Now you have installed the example into your environment. However you
need to still register this new package with cmd3. This is easy as you
can place the following filr into the directory:</p>
<div class="highlight-python"><div class="highlight"><pre>~/.cloudmesh/cmd3.yaml
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>meta:
    yaml_version: 2.1
    kind: cmd3
    filename: ${HOME}/.cloudmesh/cmd3.yaml
    location: ${HOME}/.cloudmesh/cmd3.yaml
    prefix: cmd3
cmd3:
    modules:
    - cloudmesh_cmd3.plugins
    - cloudmesh_uebercool.plugins
</pre></div>
</div>
<p>Make sure the yaml file does not have any tabs in it.</p>
<p>Now you can start cmd3 with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">cm</span>
</pre></div>
</div>
<p>and issue the command:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">help</span>
</pre></div>
</div>
<p>You should be able to see the new command.</p>
<p>To start it you simply say:</p>
<div class="highlight-python"><div class="highlight"><pre>cm&gt;  uebercool iu.edu
</pre></div>
</div>
<p>to run it directly from commandline you can use:</p>
<div class="highlight-python"><div class="highlight"><pre>cm uebercool iu.edu
</pre></div>
</div>
<p>The template simply executes a ping that is defined in the source
<cite>command_uebercool.py</cite>. If youlike to modify the command just change
the code in the plugins and the command files.</p>
<p>Yes its that simple!</p>
<p>If you have written extensions with cmd3 let us know we could discuss
the creation of user contributed space in the cmd3 git reporsitory. We
like to host your extensions.</p>
</div>
<div class="section" id="build-in-commands">
<h2><a class="toc-backref" href="#id19">Build In Commands</a><a class="headerlink" href="#build-in-commands" title="Permalink to this headline">¶</a></h2>
<div class="section" id="help">
<h3><a class="toc-backref" href="#id20">Help</a><a class="headerlink" href="#help" title="Permalink to this headline">¶</a></h3>
<p>One other good feature the above declaration has is that it
automatically registers a help string so you can say:</p>
<div class="highlight-python"><div class="highlight"><pre>help bar
</pre></div>
</div>
<p>and you will get presented with the manual page</p>
</div>
<div class="section" id="manual-pages">
<h3><a class="toc-backref" href="#id21">Manual Pages</a><a class="headerlink" href="#manual-pages" title="Permalink to this headline">¶</a></h3>
<p>Often you will run in the situation where you may have to create a
list of manual pages for your commands for your users. To simplify
that we have not provided this in Unix Man format, but simply in RST
format. You can type in the command:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">man</span>
</pre></div>
</div>
<p>and it will print you in RST format a list of all commands available
to you for your cmd3 shell. This naturally you could put into a sphinx
documentation to create a nice user manual for your users.</p>
</div>
<div class="section" id="variables">
<h3><a class="toc-backref" href="#id22">Variables</a><a class="headerlink" href="#variables" title="Permalink to this headline">¶</a></h3>
<p>CMD3 contains the ability to use variables within the shell. To see a
list of all variables, use the command:</p>
<div class="highlight-python"><div class="highlight"><pre>var list
</pre></div>
</div>
<p>or simply:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">var</span>
</pre></div>
</div>
<p>To use the content of the variable, simple use it on the shell with a
dollar sign such as:</p>
<div class="highlight-python"><div class="highlight"><pre>$date
</pre></div>
</div>
<p>Note that the variables $dat and $time are predefined and give the
current date and time.</p>
</div>
<div class="section" id="scope">
<h3><a class="toc-backref" href="#id23">Scope</a><a class="headerlink" href="#scope" title="Permalink to this headline">¶</a></h3>
<p>Often we have to type in a command multiple times. To save us typing
the name of the command, we have defined a simple scope that can be
activated with the use command.</p>
<p>You can list the scopes by typing:</p>
<div class="highlight-python"><div class="highlight"><pre>use list
</pre></div>
</div>
<p>To use a scope simply type:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">use</span>
</pre></div>
</div>
</div>
<div class="section" id="scripts">
<h3><a class="toc-backref" href="#id24">Scripts</a><a class="headerlink" href="#scripts" title="Permalink to this headline">¶</a></h3>
<p>Multiple commands can be stored in scripts. To find out more about
scripts, please execute:</p>
<div class="highlight-python"><div class="highlight"><pre>help script
</pre></div>
</div>
<p>You can use a script that is stored in a file simply by saying:</p>
<div class="highlight-python"><div class="highlight"><pre>script load filename
</pre></div>
</div>
<p>where filename is the name of the file containing the script.</p>
</div>
<div class="section" id="python">
<h3><a class="toc-backref" href="#id25">Python</a><a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h3>
<p>You can execute a python command as follows:</p>
<div class="highlight-python"><div class="highlight"><pre>py COMMAND
</pre></div>
</div>
<p>where command is the command you like to execute</p>
</div>
<div class="section" id="quitting-the-shell">
<h3><a class="toc-backref" href="#id26">Quitting the shell</a><a class="headerlink" href="#quitting-the-shell" title="Permalink to this headline">¶</a></h3>
<p>To quit the shell you can use either the commands:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">q</span>
<span class="n">quit</span>
<span class="n">EOF</span>
</pre></div>
</div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2012-2014, Gregor von Laszewski, based on his earlier code from cyberaide and cogkit.<br/>
      Last updated on May 22, 2015.<br/>
    </p>
  </div>
</footer>
  </body>
</html>